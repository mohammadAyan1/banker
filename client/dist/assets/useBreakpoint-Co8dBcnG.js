import{by as f,R as v,a as h,b0 as l}from"./index-Cwaqwj_s.js";import{u as x}from"./useForceUpdate-uYG1hq1o.js";const b=(e,n)=>{typeof(e==null?void 0:e.addEventListener)<"u"?e.addEventListener("change",n):typeof(e==null?void 0:e.addListener)<"u"&&e.addListener(n)},$=(e,n)=>{typeof(e==null?void 0:e.removeEventListener)<"u"?e.removeEventListener("change",n):typeof(e==null?void 0:e.removeListener)<"u"&&e.removeListener(n)},p=["xxl","xl","lg","md","sm","xs"],M=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),w=e=>{const n=e,s=[].concat(p).reverse();return s.forEach((a,i)=>{const t=a.toUpperCase(),r=`screen${t}Min`,o=`screen${t}`;if(!(n[r]<=n[o]))throw new Error(`${r}<=${o} fails : !(${n[r]}<=${n[o]})`);if(i<s.length-1){const c=`screen${t}Max`;if(!(n[o]<=n[c]))throw new Error(`${o}<=${c} fails : !(${n[o]}<=${n[c]})`);const d=`screen${s[i+1].toUpperCase()}Min`;if(!(n[c]<=n[d]))throw new Error(`${c}<=${d} fails : !(${n[c]}<=${n[d]})`)}}),e},g=(e,n)=>{if(n){for(const s of p)if(e[s]&&(n==null?void 0:n[s])!==void 0)return n[s]}},L=()=>{const[,e]=f(),n=M(w(e));return v.useMemo(()=>{const s=new Map;let a=-1,i={};return{responsiveMap:n,matchHandlers:{},dispatch(t){return i=t,s.forEach(r=>r(i)),s.size>=1},subscribe(t){return s.size||this.register(),a+=1,s.set(a,t),t(i),a},unsubscribe(t){s.delete(t),s.size||this.unregister()},register(){Object.entries(n).forEach(([t,r])=>{const o=({matches:u})=>{this.dispatch(Object.assign(Object.assign({},i),{[t]:u}))},c=window.matchMedia(r);b(c,o),this.matchHandlers[r]={mql:c,listener:o},o(c)})},unregister(){Object.values(n).forEach(t=>{const r=this.matchHandlers[t];$(r==null?void 0:r.mql,r==null?void 0:r.listener)}),s.clear()}}},[e])};function y(e=!0,n={}){const s=h.useRef(n),a=x(),i=L();return l(()=>{const t=i.subscribe(r=>{s.current=r,e&&a()});return()=>i.unsubscribe(t)},[]),s.current}export{g as m,p as r,y as u};
