import{a as r,j as e,V as h,i as N,k as j,h as v,a1 as C,aP as g,aQ as w,aR as R}from"./index-w41rB-zE.js";import{h as y}from"./moment-C5S46NFB.js";const P=({isEdit:a,onDataChange:i})=>{const[o,c]=r.useState(!1),[n,d]=r.useState({valuerName:"",caseRefNo:"",dateOfVisit:"",dateOfReport:"",contactPersonName:"",contactPersonMobile:"",applicantsName:"",owner:"",documentProduced:"",propertyType:"",holdingType:" ",propertyUsage:"",usageAuthorized:"",usageRestriction:"",occupancyStatus:"",measurement:".",distanceFromBranch:"",addressAsPerDocument:"",landMark:"",location:"",eastBoundary:"",westBoundary:"",northBoundary:"",southBoundary:"",connectivity:"",siteAccess:"",proximityToAmenities:" ",distanceFromCityCentre:"    ",roadTypeWidth:"",commentsOnProperty:""});r.useEffect(()=>{a&&d({valuerName:a.valuerName||"",caseRefNo:a.caseRefNo||"",dateOfVisit:a!=null&&a.dateOfVisit?y(a.dateOfVisit).format("YYYY-MM-DD"):"",dateOfReport:a!=null&&a.dateOfReport?y(a.dateOfReport).format("YYYY-MM-DD"):"",contactPersonName:a.contactPersonName||"",contactPersonMobile:a.contactPersonMobile||"",applicantsName:a.applicantsName||"",owner:a.owner||"",documentProduced:a.documentProduced||"",propertyType:a.propertyType||"",holdingType:a.holdingType||"",propertyUsage:a.propertyUsage||"",usageAuthorized:a.usageAuthorized||"",usageRestriction:a.usageRestriction||"",occupancyStatus:a.occupancyStatus||"",measurement:a.measurement||"",distanceFromBranch:a.distanceFromBranch||"",addressAsPerDocument:a.addressAsPerDocument||"",landMark:a.landMark||"",eastBoundary:a.eastBoundary||"",westBoundary:a.westBoundary||"",northBoundary:a.northBoundary||"",southBoundary:a.southBoundary||"",connectivity:a.connectivity||"",siteAccess:a.siteAccess||"",proximityToAmenities:a.proximityToAmenities||"",distanceFromCityCentre:a.distanceFromCityCentre||"",roadTypeWidth:a.roadTypeWidth||"",commentsOnProperty:a.commentsOnProperty||""})},[a]);const s=l=>{const{name:t,value:m}=l.target;d(x=>({...x,[t]:m}))},p=l=>{l.preventDefault(),i(n),h.success("Saved Successfully")};return e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"p-3 border rounded cursor-pointer",style:{backgroundColor:"#30384B"},onClick:()=>c(!o),children:e.jsxs("div",{className:"flex justify-between items-center text-white",children:[e.jsx("h4",{className:"m-0 text-lg font-semibold",children:"MANIPURAM FORM ONE"}),e.jsx("button",{type:"button",className:"bg-white text-black text-sm px-3 py-1 rounded hover:bg-gray-200",onClick:l=>{l.stopPropagation(),c(!o)},children:o?"Close":"Edit"})]})}),o&&e.jsx("div",{className:"p-3 border rounded mt-2 bg-gray-100",children:e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap -mx-2",children:[e.jsxs("div",{className:"w-full md:w-1/3 px-2 mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Valuer Name:"}),e.jsx("input",{type:"text",name:"valuerName",className:"w-full p-2 border rounded",value:n.valuerName,onChange:s})]}),e.jsxs("div",{className:"w-full md:w-1/3 px-2 mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Case Ref. No:"}),e.jsx("input",{type:"text",name:"caseRefNo",className:"w-full p-2 border rounded",value:n.caseRefNo,onChange:s})]}),e.jsxs("div",{className:"w-full md:w-1/3 px-2 mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Date of Visit:"}),e.jsx("input",{type:"date",name:"dateOfVisit",className:"w-full p-2 border rounded",value:n.dateOfVisit,onChange:s})]})]}),e.jsx("div",{className:"flex flex-wrap -mx-2",children:e.jsxs("div",{className:"w-full md:w-1/3 px-2 mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Date of Report:"}),e.jsx("input",{type:"date",name:"dateOfReport",className:"w-full p-2 border rounded",value:n.dateOfReport,onChange:s})]})}),e.jsx("h5",{className:"text-lg font-semibold mt-4 mb-2",children:"Contacted Person for property inspection"}),e.jsxs("div",{className:"flex flex-wrap -mx-2",children:[e.jsxs("div",{className:"w-full md:w-1/2 px-2 mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Name:"}),e.jsx("input",{type:"text",name:"contactPersonName",className:"w-full p-2 border rounded",value:n.contactPersonName,onChange:s})]}),e.jsxs("div",{className:"w-full md:w-1/2 px-2 mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Mobile:"}),e.jsx("input",{type:"text",name:"contactPersonMobile",className:"w-full p-2 border rounded",value:n.contactPersonMobile,onChange:s})]}),e.jsxs("div",{className:"w-full md:w-1/2 px-2 mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Usage Authorized:"}),e.jsx("input",{type:"text",name:"usageAuthorized",className:"w-full p-2 border rounded",value:n.usageAuthorized,onChange:s})]})]}),e.jsx("h5",{className:"text-lg font-semibold mt-4 mb-2",children:"Basic Details"}),e.jsx("div",{className:"flex flex-wrap -mx-2",children:[{name:"applicantsName",label:"Applicant's Name/s"},{name:"owner",label:"Owner"},{name:"documentProduced",label:"Document Produced"}].map((l,t)=>e.jsxs("div",{className:"w-full md:w-1/3 px-2 mb-3",children:[e.jsxs("label",{className:"block mb-1 font-medium",children:[l.label,":"]}),e.jsx("input",{type:"text",name:l.name,className:"w-full p-2 border rounded",value:n[l.name],onChange:s})]},t))}),e.jsx("div",{className:"flex flex-wrap -mx-2",children:[{name:"propertyType",label:"Type of Property"},{name:"holdingType",label:"Holding Type"},{name:"propertyUsage",label:"Property Usage"}].map((l,t)=>e.jsxs("div",{className:"w-full md:w-1/3 px-2 mb-3",children:[e.jsxs("label",{className:"block mb-1 font-medium",children:[l.label,":"]}),e.jsx("input",{type:"text",name:l.name,className:"w-full p-2 border rounded",value:n[l.name],onChange:s})]},t))}),e.jsxs("div",{className:"flex flex-wrap -mx-2",children:[e.jsxs("div",{className:"w-full md:w-1/3 px-2 mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Occupancy Status:"}),e.jsx("input",{type:"text",name:"occupancyStatus",className:"w-full p-2 border rounded",value:n.occupancyStatus,onChange:s})]}),e.jsxs("div",{className:"w-full md:w-1/3 px-2 mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Measurement:"}),e.jsx("input",{type:"text",name:"measurement",className:"w-full p-2 border rounded",value:n.measurement,onChange:s})]}),e.jsxs("div",{className:"w-full md:w-1/3 px-2 mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Distance from Branch:"}),e.jsx("input",{type:"text",name:"distanceFromBranch",className:"w-full p-2 border rounded",value:n.distanceFromBranch,onChange:s})]})]}),e.jsxs("div",{className:"flex flex-wrap -mx-2",children:[e.jsxs("div",{className:"w-full md:w-1/2 px-2 mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Address as per Document:"}),e.jsx("input",{type:"text",name:"addressAsPerDocument",className:"w-full p-2 border rounded",value:n.addressAsPerDocument,onChange:s})]}),e.jsxs("div",{className:"w-full md:w-1/2 px-2 mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Landmark:"}),e.jsx("input",{type:"text",name:"landMark",className:"w-full p-2 border rounded",value:n.landMark,onChange:s})]})]}),e.jsx("div",{className:"flex flex-wrap -mx-2",children:[{name:"eastBoundary",label:"East Boundary"},{name:"westBoundary",label:"West Boundary"},{name:"northBoundary",label:"North Boundary"},{name:"southBoundary",label:"South Boundary"},{name:"connectivity",label:"Connectivity"},{name:"siteAccess",label:"Site Access"},{name:"proximityToAmenities",label:"Proximity to Amenities"},{name:"distanceFromCityCentre",label:"Distance from City Centre"},{name:"roadTypeWidth",label:"Road Type/Width"},{name:"commentsOnProperty",label:"Comments on Property"}].map((l,t)=>e.jsxs("div",{className:"w-full md:w-1/2 px-2 mb-3",children:[e.jsxs("label",{className:"block mb-1 font-medium",children:[l.label,":"]}),e.jsx("input",{type:"text",name:l.name,className:"w-full p-2 border rounded",value:n[l.name],onChange:s})]},t))}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Save"})})]})})]})},k=({isEdit:a,onDataChange:i})=>{const[o,c]=r.useState(!1),[n,d]=r.useState({landComponentArea:"",landComponentRate:"",landComponentValue:"",landComponentPMARea:"",landComponentPMRRate:"",landComponentPMRValue:"",constructionComponentArea:"",constructionComponentRate:"",constructionComponentValue:"",totalValue:"",distressSaleValue:"",observations:" ",propertyDescription:"",presentMarketValue:"",forcedSaleValue:""});r.useEffect(()=>{a&&d({landComponentArea:a.landComponentArea||"",landComponentRate:a.landComponentRate||"",landComponentValue:a.landComponentValue||"",landComponentPMARea:a.landComponentPMARea||"",landComponentPMRRate:a.landComponentPMRRate||"",landComponentPMRValue:a.landComponentPMRValue||"",constructionComponentArea:a.constructionComponentArea||"",constructionComponentRate:a.constructionComponentRate||"",constructionComponentValue:a.constructionComponentValue||"",totalValue:a.totalValue||"",distressSaleValue:a.distressSaleValue||"",observations:" ",propertyDescription:a.propertyDescription||"",presentMarketValue:a.presentMarketValue||"",forcedSaleValue:a.forcedSaleValue||""})},[a]);const s=l=>{const{name:t,value:m}=l.target;d(x=>({...x,[t]:m}))},p=l=>{l.preventDefault(),i(n),h.success("Saved Successfully")};return e.jsxs("div",{className:"mb-4 border rounded",children:[e.jsxs("div",{className:"p-3 bg-[#30384B] text-white cursor-pointer flex justify-between items-center rounded",onClick:()=>c(!o),children:[e.jsx("h4",{className:"m-0 text-lg font-semibold",children:"MANIPURAM FORM TWO"}),e.jsx("button",{type:"button",className:"bg-white text-black text-sm px-3 py-1 rounded hover:bg-gray-200",onClick:l=>{l.stopPropagation(),c(!o)},children:o?"Close":"Edit"})]}),o&&e.jsxs("div",{className:"bg-gray-100 mt-2 p-4 rounded",children:[e.jsx("h5",{className:"mt-4 mb-3 font-semibold",children:"Valuation by Adopting GLR (Guideline Rate)"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Land Component Area (sqft):"}),e.jsx("input",{type:"text",name:"landComponentArea",className:"w-full border px-3 py-2 rounded",value:n.landComponentArea,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Rate (sqft):"}),e.jsx("input",{type:"text",name:"landComponentRate",className:"w-full border px-3 py-2 rounded",value:n.landComponentRate,onChange:s})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Land Component Value:"}),e.jsx("input",{type:"text",name:"landComponentValue",className:"w-full border px-3 py-2 rounded",value:n.landComponentValue,onChange:s})]}),e.jsx("h5",{className:"mt-4 mb-3 font-semibold",children:"Valuation by Adopting PMR (Prevailing Market Rate)"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Land Component Area (sqft):"}),e.jsx("input",{type:"text",name:"landComponentPMARea",className:"w-full border px-3 py-2 rounded",value:n.landComponentPMARea,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Rate (sqft):"}),e.jsx("input",{type:"text",name:"landComponentPMRRate",className:"w-full border px-3 py-2 rounded",value:n.landComponentPMRRate,onChange:s})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Land Component Value:"}),e.jsx("input",{type:"text",name:"landComponentPMRValue",className:"w-full border px-3 py-2 rounded",value:n.landComponentPMRValue,onChange:s})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Construction Component Area (sqft):"}),e.jsx("input",{type:"text",name:"constructionComponentArea",className:"w-full border px-3 py-2 rounded",value:n.constructionComponentArea,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Rate (sqft):"}),e.jsx("input",{type:"text",name:"constructionComponentRate",className:"w-full border px-3 py-2 rounded",value:n.constructionComponentRate,onChange:s})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Construction Component Value:"}),e.jsx("input",{type:"text",name:"constructionComponentValue",className:"w-full border px-3 py-2 rounded",value:n.constructionComponentValue,onChange:s})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Total Value (Rs.):"}),e.jsx("input",{type:"text",name:"totalValue",className:"w-full border px-3 py-2 rounded",value:n.totalValue,onChange:s})]}),e.jsx("h5",{className:"mt-4 mb-3 font-semibold",children:"Distress Sale Value of the Property"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Value on Sale in a Forcible/Distressed Condition:"}),e.jsx("input",{type:"text",name:"distressSaleValue",className:"w-full border px-3 py-2 rounded",value:n.distressSaleValue,onChange:s})]}),e.jsx("h5",{className:"mt-4 mb-3 font-semibold",children:"Observations"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Observations:"}),e.jsx("textarea",{name:"observations",className:"w-full border px-3 py-2 rounded",rows:"6",value:n.observations,onChange:s})]}),e.jsx("h5",{className:"mt-4 mb-3 font-semibold",children:"Valuation of Properties"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Property Description:"}),e.jsx("textarea",{name:"propertyDescription",className:"w-full border px-3 py-2 rounded",rows:"3",value:n.propertyDescription,onChange:s})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"NAME OF APPLICANT:"}),e.jsx("input",{type:"text",name:"nameOfApplicant",className:"w-full border px-3 py-2 rounded",value:n.nameOfApplicant,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Present Market Value:"}),e.jsx("input",{type:"text",name:"presentMarketValue",className:"w-full border px-3 py-2 rounded",value:n.presentMarketValue,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Forced Sale Value:"}),e.jsx("input",{type:"text",name:"forcedSaleValue",className:"w-full border px-3 py-2 rounded",value:n.forcedSaleValue,onChange:s})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{style:{background:"#30384B"},type:"submit",className:"text-white px-4 py-2 rounded",onClick:p,children:"Save"})})]})]})]})},M=()=>{const[a,i]=r.useState({}),[o,c]=r.useState({}),[n,d]=r.useState({}),s=N(),p=j(),{loading:l,error:t}=v(b=>b.manappuram),{id:m}=C();r.useEffect(()=>{(async u=>{try{const f=await s(g(u)).unwrap();d(f)}catch(f){console.error("Error fetching data:",f)}})(m)},[m]);const x=async()=>{const b={...a,...o};try{if(m){const u=await s(w({id:m,formData:b})).unwrap();h.success("Data updated successfully!")}else{const u=await s(R(b)).unwrap();p(`/bank/manappuram/${u._id}`),h.success("Data submitted successfully!")}}catch(u){console.error("Submission failed:",u)}};return e.jsxs("div",{className:"max-w-5xl mx-auto mt-6 px-4",children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Complete Valuation Report"}),e.jsx(P,{isEdit:n,onDataChange:i}),e.jsx(k,{isEdit:n,onDataChange:c}),l&&e.jsx("p",{className:"text-blue-600",children:"Submitting..."}),t&&e.jsxs("p",{className:"text-red-600",children:["Error: ",t]}),e.jsx("div",{className:"flex justify-end mt-4 mb-4",children:e.jsx("button",{className:"bg-gray-900 text-white px-6 py-2 rounded hover:bg-gray-800 transition",onClick:x,children:"Submit Report"})})]})};export{M as default};
