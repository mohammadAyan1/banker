import{i as I,h as M,a as n,M as m,j as t,cD as A,cE as O,cF as S}from"./index-w41rB-zE.js";import{F as l}from"./index-CWNi5yC6.js";import{B as d}from"./button-CgeEP9mE.js";import{F as b}from"./Table-BBOEhX1S.js";import{M as x}from"./index-0XLt7M-c.js";import{I as c}from"./index-D4KWIJoL.js";import{S as f}from"./index-CqdAOu9q.js";import{s as a}from"./index-vwUf4QFU.js";import"./index-CMUBo7h7.js";import"./isVisible-DhUEo0yb.js";import"./index-Cn9P2GMv.js";import"./index-DDhR-cup.js";import"./roundedArrow-DSsJecMi.js";import"./compact-item-CeLi5kmI.js";import"./useBreakpoint-C8nH0e-V.js";import"./useForceUpdate-DbKdcjNo.js";import"./CloseCircleFilled-DZvUHeBU.js";import"./styleChecker-Dr9BUc6D.js";import"./addEventListener-erzlvqlx.js";import"./index-BYjS_aR9.js";import"./LeftOutlined-CuVV-6P5.js";import"./EllipsisOutlined-DjOyNqyA.js";import"./useVariants-Dhb08RNU.js";import"./PurePanel-2XbhPsO7.js";import"./index-Cp_0w9sd.js";import"./Pagination-Dv8CqHjM.js";import"./TextArea-B63JDhoP.js";import"./InfoCircleFilled-mWAWBR6j.js";import"./index-CtjJNR0l.js";import"./fade-UjQwWFCr.js";import"./EyeOutlined-DPdilBGX.js";const{Option:C}=f;function ne(){const[i]=l.useForm(),o=I(),E=M(e=>e.auth.FO),[j,p]=n.useState(!1),[s,u]=n.useState(null),g=["Admin","Coordinator","FieldOfficer","TechnicalManager","RegionalManager","Accountant"];n.useEffect(()=>{o(m())},[o]);const y=(e=null)=>{u(e),e?i.setFieldsValue({name:e.name,email:e.email,role:e.role}):i.resetFields(),p(!0)},h=()=>{p(!1),u(null)},w=async e=>{try{s?(await o(A({id:s._id,data:e})).unwrap(),a.success("Employee updated successfully")):(await o(O(e)).unwrap(),a.success("Employee added successfully")),h(),o(m())}catch(r){a.error("Something went wrong"),console.error(r)}},F=e=>{console.log(e,"LIOn"),x.confirm({title:"Are you sure you want to delete this employee?",onOk:async()=>{try{await o(S(e)).unwrap(),a.success("Employee deleted"),o(m())}catch(r){a.error("Failed to delete"),console.error(r)}}})},k=[{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",dataIndex:"role",key:"role"},{title:"Status",dataIndex:"isActive",key:"isActive",render:e=>t.jsx("span",{style:{color:e?"green":"red"},children:e?"Active":"Inactive"})},{title:"Actions",key:"actions",render:(e,r)=>t.jsxs(t.Fragment,{children:[t.jsx(d,{type:"link",onClick:()=>y(r),children:"Edit"}),t.jsx(d,{type:"link",danger:!0,onClick:()=>F(r._id),children:"Delete"})]})}];return t.jsxs("div",{style:{padding:24},children:[t.jsx("h2",{children:"Employee Management"}),t.jsx(d,{type:"primary",onClick:()=>y(),style:{marginBottom:16},children:"+ Add Employee"}),t.jsx(b,{dataSource:E,columns:k,rowKey:"_id"}),t.jsx(x,{title:s?"Edit Employee":"Add Employee",open:j,onCancel:h,onOk:()=>i.submit(),okText:s?"Update":"Add",children:t.jsxs(l,{form:i,layout:"vertical",onFinish:w,children:[t.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0}],children:t.jsx(c,{})}),t.jsx(l.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email"}],children:t.jsx(c,{})}),s?"":t.jsx(l.Item,{name:"password",label:"Password",rules:[{required:!0,type:"password"}],children:t.jsx(c,{})}),t.jsx(l.Item,{name:"role",label:"Role",rules:[{required:!0}],children:t.jsx(f,{placeholder:"Select Role",children:g.map(e=>t.jsx(C,{value:e,children:e},e))})})]})})]})}export{ne as default};
