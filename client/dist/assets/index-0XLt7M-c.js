import{a as l,aB as N,bN as We,R as O,bd as Ae,f as W,bO as He,aG as oe,bP as le,C as _,b as I,bQ as De,bR as U,bS as Ve,aH as qe,b7 as Qe,bD as Ge,d as B,bT as Xe,bU as Ze,aF as Y,bl as Ue,b8 as re,by as Ye,bV as Je,bW as Ke,l as et}from"./index-w41rB-zE.js";import{B as A,c as se,u as tt}from"./button-CgeEP9mE.js";import{R as nt,a as ot}from"./index-Cn9P2GMv.js";import{R as lt}from"./CloseCircleFilled-DZvUHeBU.js";import{R as rt}from"./InfoCircleFilled-mWAWBR6j.js";import{u as ae,D as st,p as at,a as ct,P as it}from"./index-CtjJNR0l.js";import{a as ce}from"./index-CMUBo7h7.js";import{w as ut}from"./PurePanel-2XbhPsO7.js";function ft(){const[e,n]=l.useState([]),s=l.useCallback(t=>(n(o=>[].concat(N(o),[t])),()=>{n(o=>o.filter(c=>c!==t))}),[]);return[e,s]}function L(e){return!!(e!=null&&e.then)}const ie=e=>{const{type:n,children:s,prefixCls:t,buttonProps:o,close:c,autoFocus:C,emitEvent:u,isSilent:a,quitOnNullishReturnValue:m,actionFn:r}=e,f=l.useRef(!1),g=l.useRef(null),[b,p]=We(!1),d=(...i)=>{c==null||c.apply(void 0,i)};l.useEffect(()=>{let i=null;return C&&(i=setTimeout(()=>{var x;(x=g.current)===null||x===void 0||x.focus({preventScroll:!0})})),()=>{i&&clearTimeout(i)}},[]);const y=i=>{L(i)&&(p(!0),i.then((...x)=>{p(!1,!0),d.apply(void 0,x),f.current=!1},x=>{if(p(!1,!0),f.current=!1,!(a!=null&&a()))return Promise.reject(x)}))},v=i=>{if(f.current)return;if(f.current=!0,!r){d();return}let x;if(u){if(x=r(i),m&&!L(x)){f.current=!1,d(i);return}}else if(r.length)x=r(c),f.current=!1;else if(x=r(),!L(x)){d();return}y(x)};return l.createElement(A,Object.assign({},se(n),{onClick:v,loading:b,prefixCls:t},o,{ref:g}),s)},w=O.createContext({}),{Provider:ue}=w,J=()=>{const{autoFocusButton:e,cancelButtonProps:n,cancelTextLocale:s,isSilent:t,mergedOkCancel:o,rootPrefixCls:c,close:C,onCancel:u,onConfirm:a}=l.useContext(w);return o?O.createElement(ie,{isSilent:t,actionFn:u,close:(...m)=>{C==null||C.apply(void 0,m),a==null||a(!1)},autoFocus:e==="cancel",buttonProps:n,prefixCls:`${c}-btn`},s):null},K=()=>{const{autoFocusButton:e,close:n,isSilent:s,okButtonProps:t,rootPrefixCls:o,okTextLocale:c,okType:C,onConfirm:u,onOk:a}=l.useContext(w);return O.createElement(ie,{isSilent:s,type:C||"primary",actionFn:a,close:(...m)=>{n==null||n.apply(void 0,m),u==null||u(!0)},autoFocus:e==="ok",buttonProps:t,prefixCls:`${o}-btn`},c)},dt=()=>Ae()&&window.document.documentElement,ee=()=>{const{cancelButtonProps:e,cancelTextLocale:n,onCancel:s}=l.useContext(w);return O.createElement(A,Object.assign({onClick:s},e),n)},te=()=>{const{confirmLoading:e,okButtonProps:n,okType:s,okTextLocale:t,onOk:o}=l.useContext(w);return O.createElement(A,Object.assign({},se(s),{loading:e,onClick:o},n),t)};function fe(e,n){return O.createElement("span",{className:`${e}-close-x`},n||O.createElement(oe,{className:`${e}-close-icon`}))}const de=e=>{const{okText:n,okType:s="primary",cancelText:t,confirmLoading:o,onOk:c,onCancel:C,okButtonProps:u,cancelButtonProps:a,footer:m}=e,[r]=W("Modal",le()),f=n||(r==null?void 0:r.okText),g=t||(r==null?void 0:r.cancelText),b={confirmLoading:o,okButtonProps:u,cancelButtonProps:a,okTextLocale:f,cancelTextLocale:g,okType:s,onOk:c,onCancel:C},p=O.useMemo(()=>b,N(Object.values(b)));let d;return typeof m=="function"||typeof m>"u"?(d=O.createElement(O.Fragment,null,O.createElement(ee,null),O.createElement(te,null)),typeof m=="function"&&(d=m(d,{OkBtn:te,CancelBtn:ee})),d=O.createElement(ue,{value:p},d)):d=m,O.createElement(He,{disabled:!1},d)};var mt=function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(s[t[o]]=e[t[o]]);return s};let z;const Ct=e=>{z={x:e.pageX,y:e.pageY},setTimeout(()=>{z=null},100)};dt()&&document.documentElement.addEventListener("click",Ct,!0);const me=e=>{const{prefixCls:n,className:s,rootClassName:t,open:o,wrapClassName:c,centered:C,getContainer:u,focusTriggerAfterClose:a=!0,style:m,visible:r,width:f=520,footer:g,classNames:b,styles:p,children:d,loading:y,confirmLoading:v,zIndex:i,mousePosition:x,onOk:j,onCancel:T,destroyOnHidden:h,destroyOnClose:Ee}=e,$e=mt(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading","confirmLoading","zIndex","mousePosition","onOk","onCancel","destroyOnHidden","destroyOnClose"]),{getPopupContainer:je,getPrefixCls:H,direction:Te,modal:P}=l.useContext(_),D=S=>{v||T==null||T(S)},Se=S=>{j==null||j(S)},E=H("modal",n),V=H(),q=ce(E),[Ie,Q,Ne]=ae(E,q),ke=I(c,{[`${E}-centered`]:C??(P==null?void 0:P.centered),[`${E}-wrap-rtl`]:Te==="rtl"}),we=g!==null&&!y?l.createElement(de,Object.assign({},e,{onOk:Se,onCancel:D})):null,[G,X,Re,Fe]=De(U(e),U(P),{closable:!0,closeIcon:l.createElement(oe,{className:`${E}-close-icon`}),closeIconRender:S=>fe(E,S)}),Me=Ve(`.${E}-content`),[Be,_e]=qe("Modal",i),[Le,F]=l.useMemo(()=>f&&typeof f=="object"?[void 0,f]:[f,void 0],[f]),ze=l.useMemo(()=>{const S={};return F&&Object.keys(F).forEach(Z=>{const M=F[Z];M!==void 0&&(S[`--${E}-${Z}-width`]=typeof M=="number"?`${M}px`:M)}),S},[F]);return Ie(l.createElement(Qe,{form:!0,space:!0},l.createElement(Ge.Provider,{value:_e},l.createElement(st,Object.assign({width:Le},$e,{zIndex:Be,getContainer:u===void 0?je:u,prefixCls:E,rootClassName:I(Q,t,Ne,q),footer:we,visible:o??r,mousePosition:x??z,onClose:D,closable:G&&Object.assign({disabled:Re,closeIcon:X},Fe),closeIcon:X,focusTriggerAfterClose:a,transitionName:B(V,"zoom",e.transitionName),maskTransitionName:B(V,"fade",e.maskTransitionName),className:I(Q,s,P==null?void 0:P.className),style:Object.assign(Object.assign(Object.assign({},P==null?void 0:P.style),m),ze),classNames:Object.assign(Object.assign(Object.assign({},P==null?void 0:P.classNames),b),{wrapper:I(ke,b==null?void 0:b.wrapper)}),styles:Object.assign(Object.assign({},P==null?void 0:P.styles),p),panelRef:Me,destroyOnClose:h??Ee}),y?l.createElement(Xe,{active:!0,title:!1,paragraph:{rows:4},className:`${E}-body-skeleton`}):d))))},gt=e=>{const{componentCls:n,titleFontSize:s,titleLineHeight:t,modalConfirmIconSize:o,fontSize:c,lineHeight:C,modalTitleHeight:u,fontHeight:a,confirmBodyPadding:m}=e,r=`${n}-confirm`;return{[r]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${r}-body-wrapper`]:Object.assign({},Ue()),[`&${n} ${n}-body`]:{padding:m},[`${r}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(a).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(u).sub(o).equal()).div(2).equal()}},[`${r}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${Y(e.marginSM)})`},[`${e.iconCls} + ${r}-paragraph`]:{maxWidth:`calc(100% - ${Y(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${r}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:s,lineHeight:t},[`${r}-content`]:{color:e.colorText,fontSize:c,lineHeight:C},[`${r}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${r}-error ${r}-body > ${e.iconCls}`]:{color:e.colorError},[`${r}-warning ${r}-body > ${e.iconCls},
        ${r}-confirm ${r}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${r}-info ${r}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${r}-success ${r}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},bt=Ze(["Modal","confirm"],e=>{const n=at(e);return[gt(n)]},ct,{order:-1e3});var vt=function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(s[t[o]]=e[t[o]]);return s};function Ce(e){const{prefixCls:n,icon:s,okText:t,cancelText:o,confirmPrefixCls:c,type:C,okCancel:u,footer:a,locale:m}=e,r=vt(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=s;if(!s&&s!==null)switch(C){case"info":f=l.createElement(rt,null);break;case"success":f=l.createElement(ot,null);break;case"error":f=l.createElement(lt,null);break;default:f=l.createElement(nt,null)}const g=u??C==="confirm",b=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[p]=W("Modal"),d=m||p,y=t||(g?d==null?void 0:d.okText:d==null?void 0:d.justOkText),v=o||(d==null?void 0:d.cancelText),i=Object.assign({autoFocusButton:b,cancelTextLocale:v,okTextLocale:y,mergedOkCancel:g},r),x=l.useMemo(()=>i,N(Object.values(i))),j=l.createElement(l.Fragment,null,l.createElement(J,null),l.createElement(K,null)),T=e.title!==void 0&&e.title!==null,h=`${c}-body`;return l.createElement("div",{className:`${c}-body-wrapper`},l.createElement("div",{className:I(h,{[`${h}-has-title`]:T})},f,l.createElement("div",{className:`${c}-paragraph`},T&&l.createElement("span",{className:`${c}-title`},e.title),l.createElement("div",{className:`${c}-content`},e.content))),a===void 0||typeof a=="function"?l.createElement(ue,{value:x},l.createElement("div",{className:`${c}-btns`},typeof a=="function"?a(j,{OkBtn:K,CancelBtn:J}):j)):a,l.createElement(bt,{prefixCls:n}))}const pt=e=>{const{close:n,zIndex:s,maskStyle:t,direction:o,prefixCls:c,wrapClassName:C,rootPrefixCls:u,bodyStyle:a,closable:m=!1,onConfirm:r,styles:f}=e,g=`${c}-confirm`,b=e.width||416,p=e.style||{},d=e.mask===void 0?!0:e.mask,y=e.maskClosable===void 0?!1:e.maskClosable,v=I(g,`${g}-${e.type}`,{[`${g}-rtl`]:o==="rtl"},e.className),[,i]=Ye(),x=l.useMemo(()=>s!==void 0?s:i.zIndexPopupBase+Je,[s,i]);return l.createElement(me,Object.assign({},e,{className:v,wrapClassName:I({[`${g}-centered`]:!!e.centered},C),onCancel:()=>{n==null||n({triggerCancel:!0}),r==null||r(!1)},title:"",footer:null,transitionName:B(u||"","zoom",e.transitionName),maskTransitionName:B(u||"","fade",e.maskTransitionName),mask:d,maskClosable:y,style:p,styles:Object.assign({body:a,mask:t},f),width:b,zIndex:x,closable:m}),l.createElement(Ce,Object.assign({},e,{confirmPrefixCls:g})))},ge=e=>{const{rootPrefixCls:n,iconPrefixCls:s,direction:t,theme:o}=e;return l.createElement(re,{prefixCls:n,iconPrefixCls:s,direction:t,theme:o},l.createElement(pt,Object.assign({},e)))},k=[];let be="";function ve(){return be}const xt=e=>{var n,s;const{prefixCls:t,getContainer:o,direction:c}=e,C=le(),u=l.useContext(_),a=ve()||u.getPrefixCls(),m=t||`${a}-modal`;let r=o;return r===!1&&(r=void 0),O.createElement(ge,Object.assign({},e,{rootPrefixCls:a,prefixCls:m,iconPrefixCls:u.iconPrefixCls,theme:u.theme,direction:c??u.direction,locale:(s=(n=u.locale)===null||n===void 0?void 0:n.Modal)!==null&&s!==void 0?s:C,getContainer:r}))};function R(e){const n=Ke(),s=document.createDocumentFragment();let t=Object.assign(Object.assign({},e),{close:a,open:!0}),o,c;function C(...r){var f;if(r.some(p=>p==null?void 0:p.triggerCancel)){var b;(f=e.onCancel)===null||f===void 0||(b=f).call.apply(b,[e,()=>{}].concat(N(r.slice(1))))}for(let p=0;p<k.length;p++)if(k[p]===a){k.splice(p,1);break}c()}function u(r){clearTimeout(o),o=setTimeout(()=>{const f=n.getPrefixCls(void 0,ve()),g=n.getIconPrefixCls(),b=n.getTheme(),p=O.createElement(xt,Object.assign({},r));c=tt()(O.createElement(re,{prefixCls:f,iconPrefixCls:g,theme:b},n.holderRender?n.holderRender(p):p),s)})}function a(...r){t=Object.assign(Object.assign({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),C.apply(this,r)}}),t.visible&&delete t.visible,u(t)}function m(r){typeof r=="function"?t=r(t):t=Object.assign(Object.assign({},t),r),u(t)}return u(t),k.push(a),{destroy:a,update:m}}function pe(e){return Object.assign(Object.assign({},e),{type:"warning"})}function xe(e){return Object.assign(Object.assign({},e),{type:"info"})}function ye(e){return Object.assign(Object.assign({},e),{type:"success"})}function Oe(e){return Object.assign(Object.assign({},e),{type:"error"})}function Pe(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function yt({rootPrefixCls:e}){be=e}var Ot=function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(s[t[o]]=e[t[o]]);return s};const Pt=(e,n)=>{var s,{afterClose:t,config:o}=e,c=Ot(e,["afterClose","config"]);const[C,u]=l.useState(!0),[a,m]=l.useState(o),{direction:r,getPrefixCls:f}=l.useContext(_),g=f("modal"),b=f(),p=()=>{var i;t(),(i=a.afterClose)===null||i===void 0||i.call(a)},d=(...i)=>{var x;if(u(!1),i.some(h=>h==null?void 0:h.triggerCancel)){var T;(x=a.onCancel)===null||x===void 0||(T=x).call.apply(T,[a,()=>{}].concat(N(i.slice(1))))}};l.useImperativeHandle(n,()=>({destroy:d,update:i=>{m(x=>{const j=typeof i=="function"?i(x):i;return Object.assign(Object.assign({},x),j)})}}));const y=(s=a.okCancel)!==null&&s!==void 0?s:a.type==="confirm",[v]=W("Modal",et.Modal);return l.createElement(ge,Object.assign({prefixCls:g,rootPrefixCls:b},a,{close:d,open:C,afterClose:p,okText:a.okText||(y?v==null?void 0:v.okText:v==null?void 0:v.justOkText),direction:a.direction||r,cancelText:a.cancelText||(v==null?void 0:v.cancelText)},c))},ht=l.forwardRef(Pt);let ne=0;const Et=l.memo(l.forwardRef((e,n)=>{const[s,t]=ft();return l.useImperativeHandle(n,()=>({patchElement:t}),[]),l.createElement(l.Fragment,null,s)}));function $t(){const e=l.useRef(null),[n,s]=l.useState([]);l.useEffect(()=>{n.length&&(N(n).forEach(C=>{C()}),s([]))},[n]);const t=l.useCallback(c=>function(u){var a;ne+=1;const m=l.createRef();let r;const f=new Promise(y=>{r=y});let g=!1,b;const p=l.createElement(ht,{key:`modal-${ne}`,config:c(u),ref:m,afterClose:()=>{b==null||b()},isSilent:()=>g,onConfirm:y=>{r(y)}});return b=(a=e.current)===null||a===void 0?void 0:a.patchElement(p),b&&k.push(b),{destroy:()=>{function y(){var v;(v=m.current)===null||v===void 0||v.destroy()}m.current?y():s(v=>[].concat(N(v),[y]))},update:y=>{function v(){var i;(i=m.current)===null||i===void 0||i.update(y)}m.current?v():s(i=>[].concat(N(i),[v]))},then:y=>(g=!0,f.then(y))}},[]);return[l.useMemo(()=>({info:t(xe),success:t(ye),error:t(Oe),warning:t(pe),confirm:t(Pe)}),[]),l.createElement(Et,{key:"modal-holder",ref:e})]}var jt=function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(s[t[o]]=e[t[o]]);return s};const Tt=e=>{const{prefixCls:n,className:s,closeIcon:t,closable:o,type:c,title:C,children:u,footer:a}=e,m=jt(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:r}=l.useContext(_),f=r(),g=n||r("modal"),b=ce(f),[p,d,y]=ae(g,b),v=`${g}-confirm`;let i={};return c?i={closable:o??!1,title:"",footer:"",children:l.createElement(Ce,Object.assign({},e,{prefixCls:g,confirmPrefixCls:v,rootPrefixCls:f,content:u}))}:i={closable:o??!0,title:C,footer:a!==null&&l.createElement(de,Object.assign({},e)),children:u},p(l.createElement(it,Object.assign({prefixCls:g,className:I(d,`${g}-pure-panel`,c&&v,c&&`${v}-${c}`,s,y,b)},m,{closeIcon:fe(g,t),closable:o},i)))},St=ut(Tt);function he(e){return R(pe(e))}const $=me;$.useModal=$t;$.info=function(n){return R(xe(n))};$.success=function(n){return R(ye(n))};$.error=function(n){return R(Oe(n))};$.warning=he;$.warn=he;$.confirm=function(n){return R(Pe(n))};$.destroyAll=function(){for(;k.length;){const n=k.pop();n&&n()}};$.config=yt;$._InternalPanelDoNotUseOrYouWillBeFired=St;export{ie as A,$ as M};
